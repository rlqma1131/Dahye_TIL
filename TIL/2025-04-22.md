# 16일

`BattleManager`의 공격 턴 `PlayerAttackPhase()`를 작성 후 몬스터 공격턴을 맡아주신 조원분의 스크립트와 처음 Merge를 시도해봤는데 다행히 충돌이 발견되지 않아 `MonsterAttackPhase()`로 명명 후 다른 조원분들의 스크립트와 Merge했는데....

### 클래스 간 연결

여러 개의 스크립트를 Merge하니 서로 다른 변수, 오타, 클래스 범위(보호 수준?) 설정 등 연결 조건이 맞지 않아 호출에 이상이 생기는 경우가 굉장히 많았다. 이 부분에 대해 명확히 집고 넘어가야할 필요성을 느껴서 공부해보았다!

___

### ✔ 핵심! : 클래스 간의 "관계"를 잘 만들어야 한다.

1. 다른 클래스의 함수를 호출하려면?
- 그 클래스의 인스턴스가 필요하다
(Ex)
```cs
BattleManager battleManager = new BattleManager();
battleManager.PlayerAttackPhase();
```

2. 어디서 인스턴스를 만들어?
- 직접 만들 수도 있고 (내부에서 new) 외부에서 만들어서 생성자나 필도로 전달할 수 있다. (의존성 주입)

3. **static** 함수나 변수는?
- 클래스 이름으로 바로 호출 가능
(EX)
```cs
BattleManager.PlayerAttackPhase();
```
- 대신 데이터 공유나 확장성에 불리할 수 있음 (인스턴스마다 다르게 못씀)

## ✅ C# 클래스 간 호출 정리표

| 상황 | 설명 | 해결 방법 |
|------|------|-----------|
| 다른 클래스의 `일반 함수` 호출 | 인스턴스(객체)가 필요함 | `클래스 객체 = new 클래스();`<br>`객체.함수();` |
| 다른 클래스의 `static 함수` 호출 | 객체 없이 호출 가능 | `클래스명.함수();` |
| 다른 클래스와 데이터 공유 | 상태를 여러 곳에서 사용 | 생성자 주입 / 속성 주입 |
| 같은 객체를 여러 클래스에서 공유 | 예: Player 상태 | 외부에서 생성한 인스턴스를 파라미터로 전달 |
| 매개변수 오류 | 함수에 인자를 전달 안 함 | 인자를 전달하거나 함수 정의 수정 |

> 💡 static은 편리하지만 상태 공유가 어렵다!  
> 객체 방식은 확장성과 유지보수에 유리하다.

___

### 충돌한 원인?

- 클래스 선언 방식과 호출 방식이 서로 상응?하지 않아 호출 조건에 부합하지 않았다.
- 클래스의 용도, 필요에 따라 클래스를 선언하는 방식과 변수를 선언하는 방식에서 혼용이 있었다.
- 클래스 생성 시 용도와 외부스크립트에서의 필요성에 대해 조원 간 의견이 나누어지지 않았다.
___
### 느낀 점
스크립트 작성에 있어서 그 로직의 용도와 공유 가능성에 대한 생각의 중요성을 매우매우느꼈다.
협업에서 클래스간의 관계설정이 중요한 만큼 클래스 선언 방식에 대해 제대로 알고 있어야 하는데 아직은 조금 혼동이 온다.. 확실해질때까지 공부해봐야겠다!!!!

그리고 작업하다가 GithubDesktop에서 다른 branch로 넘어가면 안된다는것도....😂😰😰😭
정말 모든 작업물이 날아가는 줄 알고 식은 땀이 났지만 그래도 조원분들과 열띤 스크럼을 한 직후라 그나마 처음보단 빨리 복구할 수 있었다...
